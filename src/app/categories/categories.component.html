<global-nav class="bottom" (navChanged)="onNavChanged($event)"></global-nav>
<div  class="content-wrapper" scrollListener (scrollChange)="toggleHeader($event)">
  <div class="container">
    <div class="row  pt-4 pb-4 align-items-center">
      <div class="col-3">
       <div class="route-tree">
        Open data > Categories > Family
       </div>
      </div>
      <div class="col-9">
         <form #f="ngForm" class=" filter-form" >
          <div class="search-box">
            <input placeholder="Search dataset" class="ng-input" name="datasetFullname"
            typehead-co
            [url]="'api/get/Permission/Datasets/GlobalSearchForDataset'"
            [apiKey]="'datasetFullname'"
            [listItemLabel]="'name'"
            (selected)="handleResultSelected($event)"
            [(ngModel)]="inputValue" (keydown)="onInputEnter($event)">
            <div class="search-ico" (click)="onSubmit()">
              <fa-icon [icon]="faSearch"></fa-icon>
            </div>
          </div>

          <div class="format-select">
              <select  name="formatId" ngModel id="format_select" (ngModelChange)="onSubmit()">
                <option value="" class="default" >Select format</option>
                <option  *ngFor="let type of (formatTypes$ | async)" [value]="type?.value">{{type?.label}}</option>
              </select>
              <div class="custom-caret">
               <img src="./assets/icons/caret.svg" class="icon">
              </div>
        </div>
        <input [hidden]="true" name="categoryId" [(ngModel)]="categoryQuery.categoryId">
      </form>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-sm-5 col-md-4 col-lg-3 pr-0">
        <module-sidebar (selected)="catIdChanged($event)"  [type]="'category'"></module-sidebar>
      </div>
      <div class="col-12 col-sm-7 col-md-8 col-lg-9 ">
         <dataset-list [categoryQuery]= "categoryQuery" *ngIf="!datasetId"
          #dataset_list [type]="'category'"
           (boxSelected)="datasetId = $event"></dataset-list>

         <dataset-detail  [id]="datasetId" *ngIf="datasetId" [isInner]="true" (navBack)="exitDetail()"></dataset-detail>
      </div>
    </div>
  </div>
</div>
