<form #f="ngForm" patch-form [form]="f" [data]="data?.row" class="nt-form" >

  <mat-vertical-stepper [linear]="true" #stepper [selectedIndex]="selectedIndex"  >
    <mat-step [stepControl]="f">
          <ng-template matStepLabel>Dataset main info</ng-template>
        <div class="main-info">
            <div class="left">

              <mat-form-field class="example-full-width">
                <input matInput placeholder="Name Kg" class="nt-form-input" name="nameKg" ngModel  required>
                <mat-error>{{getErrors('nameKg')}} </mat-error>
              </mat-form-field>
              <mat-form-field class="example-full-width">
                <input matInput placeholder="Name En" class="nt-form-input" name="nameEn" ngModel  required>
                <mat-error>{{getErrors('nameEn')}} </mat-error>
              </mat-form-field>
              <mat-form-field class="example-full-width">
                <input matInput placeholder="Name Ru" class="nt-form-input" name="nameRu" ngModel  required>
                <mat-error>{{getErrors('nameRu')}} </mat-error>
              </mat-form-field>

              <mat-form-field class="example-full-width">
                <input matInput placeholder="Description Kg" class="nt-form-input" name="descriptionKg" ngModel  required>
                <mat-error>{{getErrors('descriptionKg')}} </mat-error>
              </mat-form-field>

              <mat-form-field class="example-full-width">
                  <input matInput placeholder="Description En" class="nt-form-input" name="descriptionEn" ngModel  required>
                  <mat-error>{{getErrors('descriptionEn')}} </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <input matInput placeholder="Description Ru" class="nt-form-input" name="descriptionRu" ngModel  required>
                    <mat-error>{{getErrors('descriptionRu')}} </mat-error>
                  </mat-form-field>
             </div>
             <div class="right">
                <mat-form-field class="example-full-width">
                    <input matInput placeholder="OrgName Kg" class="nt-form-input" name="orgKg" ngModel >
                    <mat-error>{{getErrors('orgKg')}} </mat-error>
                  </mat-form-field>

                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="OrgName En" class="nt-form-input" name="orgEn" ngModel >
                    <mat-error>{{getErrors('orgEn')}} </mat-error>
                  </mat-form-field>

                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="OrgName Ru" class="nt-form-input" name="orgRu" ngModel >
                    <mat-error>{{getErrors('orgRu')}} </mat-error>
                  </mat-form-field>
             </div>
          </div>

        <div>
          <button mat-raised-button color="primary"  type="submit"  insertTableData [form]="f"
          *ngIf="!(f?.value.id)"
          [table]="data?.table"
          (onClose)="onClose($event)"
          >Add</button>
        </div>
    </mat-step>

    <mat-step  [stepControl]="f" >
      <ng-template matStepLabel>Category</ng-template>
      <ng-container *ngIf="f?.value?.id">
        <div class="title">
          <div class="add-icon" (click)="table4.addData()">
            <fa-icon [icon]="faPlusCircle"></fa-icon>
          </div>
         </div>

      <div style="width: 100%;height: 200px;" >
          <ngx-nt-table #table4
          [config]="config4"
          (rowAdd)="initDialog4(table4)"
          (rowEdit)="initDialog4(table4, $event)"
          [multiSelect]="false"
          [pagination]="false"
        ></ngx-nt-table>
       </div>

      <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext>Next</button>
        </div>
      </ng-container>
  </mat-step>

    <mat-step  [stepControl]="f" >
      <ng-template matStepLabel>Keyword data</ng-template>
      <ng-container *ngIf="f?.value?.id">
        <div class="title">
          <div class="add-icon" (click)="table2.addData()">
            <fa-icon [icon]="faPlusCircle"></fa-icon>
          </div>
         </div>

      <div style="width: 100%;height: 200px;" >
          <ngx-nt-table #table2
          [config]="config2"
          (rowAdd)="initDialog2(table2)"
          (rowEdit)="initDialog2(table2, $event)"
          [multiSelect]="false"
          [pagination]="false"
        ></ngx-nt-table>
       </div>

      <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext>Next</button>
        </div>
      </ng-container>
  </mat-step>

    <mat-step   [stepControl]="f"   >
        <ng-template matStepLabel>Version data</ng-template>
        <ng-container  *ngIf="f?.value?.id">
          <div class="title" >
            <div class="add-icon" (click)="table3.addData()">
              <fa-icon [icon]="faPlusCircle"></fa-icon>
            </div>
           </div>

        <div style="width: 100%;height: 200px;" >
            <ngx-nt-table #table3
            [config]="config3"
            (rowAdd)="initDialog3(table3)"
            (rowEdit)="initDialog3(table3, $event)"
            [multiSelect]="false"
            [pagination]="false"
          ></ngx-nt-table>
         </div>

        <div>
            <button mat-button matStepperPrevious>Back</button>
          </div>
        </ng-container>
    </mat-step>
  </mat-vertical-stepper>

  <input [hidden]="true" name="id" ngModel>

  <div class="actions">
    <button mat-raised-button color="accent"  type="submit" updateTableData [form]="f"
    *ngIf="f?.value.id"
    [disabled]="f?.dirty && !f?.valid"
    (onClose)="dialogRef.close()"
    [table]="data?.table"
    >Update</button>
    <button mat-raised-button (click)="dialogRef.close()" type="reset">Cancel</button>
  </div>

</form>
